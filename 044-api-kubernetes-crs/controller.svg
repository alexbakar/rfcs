<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="829px" preserveAspectRatio="none" style="width:565px;height:829px;" version="1.1" viewBox="0 0 565 829" width="565px" zoomAndPan="magnify"><defs><filter height="300%" id="f1nv7a5oe833c9" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1nv7a5oe833c9)" height="195.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="173.5" y="117.4297"/><rect fill="#FFFFFF" filter="url(#f1nv7a5oe833c9)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="173.5" y="399.625"/><rect fill="#FFFFFF" filter="url(#f1nv7a5oe833c9)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="173.5" y="694.9531"/><rect fill="#FFFFFF" filter="url(#f1nv7a5oe833c9)" height="41.6992" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="350.5" y="159.1289"/><rect fill="#FFFFFF" filter="url(#f1nv7a5oe833c9)" height="41.6992" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="350.5" y="242.5273"/><rect fill="#FFFFFF" filter="url(#f1nv7a5oe833c9)" height="353.5938" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="350.5" y="370.4922"/><rect fill="#FFFFFF" filter="url(#f1nv7a5oe833c9)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="489.5" y="457.8906"/><rect fill="#FFFFFF" filter="url(#f1nv7a5oe833c9)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="489.5" y="540.2891"/><rect fill="#FFFFFF" filter="url(#f1nv7a5oe833c9)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="489.5" y="629.6875"/><rect fill="#FFFFFF" filter="url(#f1nv7a5oe833c9)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="248.5" x="303" y="502.0234"/><rect fill="#FFFFFF" filter="url(#f1nv7a5oe833c9)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="248.5" x="303" y="591.4219"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="27" x2="27" y1="86.2969" y2="321.3594"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="27" x2="27" y1="321.3594" y2="349.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="27" x2="27" y1="349.3594" y2="742.0859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87" x2="87" y1="86.2969" y2="321.3594"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="87" x2="87" y1="321.3594" y2="349.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87" x2="87" y1="349.3594" y2="742.0859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="178" x2="178" y1="86.2969" y2="321.3594"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="178" x2="178" y1="321.3594" y2="349.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="178" x2="178" y1="349.3594" y2="742.0859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="355" x2="355" y1="86.2969" y2="321.3594"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="355" x2="355" y1="321.3594" y2="349.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="355" x2="355" y1="349.3594" y2="742.0859"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494.5" x2="494.5" y1="86.2969" y2="321.3594"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="494.5" x2="494.5" y1="321.3594" y2="349.3594"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494.5" x2="494.5" y1="349.3594" y2="742.0859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="8" y="82.9951">User</text><ellipse cx="27" cy="13" fill="#FEFECE" filter="url(#f1nv7a5oe833c9)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M27,21 L27,48 M14,29 L40,29 M27,48 L14,63 M27,48 L40,63 " fill="none" filter="url(#f1nv7a5oe833c9)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="8" y="754.0811">User</text><ellipse cx="27" cy="767.3828" fill="#FEFECE" filter="url(#f1nv7a5oe833c9)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M27,775.3828 L27,802.3828 M14,783.3828 L40,783.3828 M27,802.3828 L14,817.3828 M27,802.3828 L40,817.3828 " fill="none" filter="url(#f1nv7a5oe833c9)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="56" y="82.9951">Informer</text><ellipse cx="87.5" cy="54" fill="#FEFECE" filter="url(#f1nv7a5oe833c9)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="83.5,42,89.5,37,87.5,42,89.5,47,83.5,42" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="56" y="754.0811">Informer</text><ellipse cx="87.5" cy="773.3828" fill="#FEFECE" filter="url(#f1nv7a5oe833c9)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="83.5,761.3828,89.5,756.3828,87.5,761.3828,89.5,766.3828,83.5,761.3828" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1nv7a5oe833c9)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="95" x="129" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="136" y="70.9951">Kubernetes</text><rect fill="#FEFECE" filter="url(#f1nv7a5oe833c9)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="95" x="129" y="741.0859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="81" x="136" y="761.0811">Kubernetes</text><rect fill="#FEFECE" filter="url(#f1nv7a5oe833c9)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="313" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="320" y="70.9951">Controller</text><rect fill="#FEFECE" filter="url(#f1nv7a5oe833c9)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="313" y="741.0859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="320" y="761.0811">Controller</text><rect fill="#FEFECE" filter="url(#f1nv7a5oe833c9)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="90" x="447.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="454.5" y="70.9951">Concourse</text><rect fill="#FEFECE" filter="url(#f1nv7a5oe833c9)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="90" x="447.5" y="741.0859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="454.5" y="761.0811">Concourse</text><rect fill="#FFFFFF" filter="url(#f1nv7a5oe833c9)" height="195.9297" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="173.5" y="117.4297"/><rect fill="#FFFFFF" filter="url(#f1nv7a5oe833c9)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="173.5" y="399.625"/><rect fill="#FFFFFF" filter="url(#f1nv7a5oe833c9)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="173.5" y="694.9531"/><rect fill="#FFFFFF" filter="url(#f1nv7a5oe833c9)" height="41.6992" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="350.5" y="159.1289"/><rect fill="#FFFFFF" filter="url(#f1nv7a5oe833c9)" height="41.6992" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="350.5" y="242.5273"/><rect fill="#FFFFFF" filter="url(#f1nv7a5oe833c9)" height="353.5938" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="350.5" y="370.4922"/><rect fill="#FFFFFF" filter="url(#f1nv7a5oe833c9)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="489.5" y="457.8906"/><rect fill="#FFFFFF" filter="url(#f1nv7a5oe833c9)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="489.5" y="540.2891"/><rect fill="#FFFFFF" filter="url(#f1nv7a5oe833c9)" height="29.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="489.5" y="629.6875"/><polygon fill="#A80036" points="161.5,113.4297,171.5,117.4297,161.5,121.4297,165.5,117.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="27" x2="167.5" y1="117.4297" y2="117.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="49" x="34" y="112.3638">Pipeline</text><polygon fill="#A80036" points="338.5,155.1289,348.5,159.1289,338.5,163.1289,342.5,159.1289" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="183.5" x2="344.5" y1="159.1289" y2="159.1289"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="45" x="190.5" y="154.063">Mutate</text><path d="M365,130.4297 L365,170.4297 L553,170.4297 L553,140.4297 L543,130.4297 L365,130.4297 " fill="#FBFB77" filter="url(#f1nv7a5oe833c9)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M543,130.4297 L543,140.4297 L553,140.4297 L543,130.4297 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="371" y="147.4966">could perhaps interpolate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="371" y="162.6294">local variables?</text><polygon fill="#A80036" points="194.5,196.8281,184.5,200.8281,194.5,204.8281,190.5,200.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="188.5" x2="354.5" y1="200.8281" y2="200.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="200.5" y="195.7622">Ok</text><polygon fill="#A80036" points="338.5,238.5273,348.5,242.5273,338.5,246.5273,342.5,242.5273" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="183.5" x2="344.5" y1="242.5273" y2="242.5273"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="38" x="190.5" y="237.4614">Admit</text><path d="M365,213.8281 L365,253.8281 L503,253.8281 L503,223.8281 L493,213.8281 L365,213.8281 " fill="#FBFB77" filter="url(#f1nv7a5oe833c9)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M493,213.8281 L493,223.8281 L503,223.8281 L493,213.8281 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="371" y="230.895">could validate the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="371" y="246.0278">pipeline config?</text><polygon fill="#A80036" points="194.5,280.2266,184.5,284.2266,194.5,288.2266,190.5,284.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="188.5" x2="354.5" y1="284.2266" y2="284.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="200.5" y="279.1606">Ok</text><polygon fill="#A80036" points="38,309.3594,28,313.3594,38,317.3594,34,313.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="32" x2="177.5" y1="313.3594" y2="313.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="44" y="308.2935">Ok</text><polygon fill="#A80036" points="338.5,366.4922,348.5,370.4922,338.5,374.4922,342.5,370.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="344.5" y1="370.4922" y2="370.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="94.5" y="365.4263">Reconcille</text><polygon fill="#A80036" points="194.5,395.625,184.5,399.625,194.5,403.625,190.5,399.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="188.5" x2="349.5" y1="399.625" y2="399.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="200.5" y="394.5591">Get Pipeline K8s Object</text><polygon fill="#A80036" points="338.5,424.7578,348.5,428.7578,338.5,432.7578,342.5,428.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="178.5" x2="344.5" y1="428.7578" y2="428.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="185.5" y="423.6919">Pipeline Spec</text><polygon fill="#A80036" points="477.5,453.8906,487.5,457.8906,477.5,461.8906,481.5,457.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="360.5" x2="483.5" y1="457.8906" y2="457.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="367.5" y="452.8247">Set Pipeline</text><polygon fill="#A80036" points="371.5,483.0234,361.5,487.0234,371.5,491.0234,367.5,487.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="365.5" x2="493.5" y1="487.0234" y2="487.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="377.5" y="481.9575">Ok</text><path d="M303,502.0234 L367,502.0234 L367,509.0234 L357,519.0234 L303,519.0234 L303,502.0234 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="248.5" x="303" y="502.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="318" y="515.0903">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="107" x="382" y="514.2339">[paused==false]</text><polygon fill="#A80036" points="477.5,536.2891,487.5,540.2891,477.5,544.2891,481.5,540.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="360.5" x2="483.5" y1="540.2891" y2="540.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="367.5" y="535.2231">Unpause Pipeline</text><polygon fill="#A80036" points="371.5,565.4219,361.5,569.4219,371.5,573.4219,367.5,569.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="365.5" x2="493.5" y1="569.4219" y2="569.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="377.5" y="564.356">Ok</text><path d="M303,591.4219 L367,591.4219 L367,598.4219 L357,608.4219 L303,608.4219 L303,591.4219 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="248.5" x="303" y="591.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="318" y="604.4888">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="93" x="382" y="603.6323">[public==true]</text><polygon fill="#A80036" points="477.5,625.6875,487.5,629.6875,477.5,633.6875,481.5,629.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="360.5" x2="483.5" y1="629.6875" y2="629.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="367.5" y="624.6216">Expose Pipeline</text><polygon fill="#A80036" points="371.5,654.8203,361.5,658.8203,371.5,662.8203,367.5,658.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="365.5" x2="493.5" y1="658.8203" y2="658.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="377.5" y="653.7544">Ok</text><polygon fill="#A80036" points="194.5,690.9531,184.5,694.9531,194.5,698.9531,190.5,694.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="188.5" x2="349.5" y1="694.9531" y2="694.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="200.5" y="689.8872">Update Status</text><polygon fill="#A80036" points="343.5,720.0859,353.5,724.0859,343.5,728.0859,347.5,724.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="178.5" x2="349.5" y1="724.0859" y2="724.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="185.5" y="719.02">Ok</text><!--MD5=[e9114c1eff39b6a5e006c499fffeba4a]
@startuml
actor User
	control Informer
	participant Kubernetes
	participant Controller
	participant Concourse


	autoactivate on

	User -> Kubernetes : Pipeline

		Kubernetes -> Controller : Mutate
		note right
			   could perhaps interpolate 
			   local variables?
		end note
		Controller - -> Kubernetes : Ok


		Kubernetes -> Controller: Admit
		note right
			   could validate the 
			   pipeline config?
		end note
		Controller - -> Kubernetes: Ok

	Kubernetes - -> User: Ok

	...

	Informer -> Controller : Reconcille

		Controller -> Kubernetes : Get Pipeline K8s Object
		Kubernetes - -> Controller: Pipeline Spec

		Controller -> Concourse : Set Pipeline
		Concourse - -> Controller: Ok

		alt paused==false
			Controller -> Concourse : Unpause Pipeline
			Concourse - -> Controller : Ok
		end

		alt public==true
			Controller -> Concourse : Expose Pipeline
			Concourse - -> Controller : Ok
		end

		Controller -> Kubernetes : Update Status
		Kubernetes - -> Controller: Ok

	deactivate
@enduml

PlantUML version 1.2020.01(Sun Feb 16 17:40:32 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_242-b08
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>